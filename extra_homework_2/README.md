# Дополнительная лабораторная работа 2
## Цель работы
Получние навыков разработки эволюционных алгоритмов для решения комбинаторных задач на примере задачи коммивояжёра.

Освоение нестандартных представлений в контексте комбинаторных задач.

<!-- 
## Задачи
* Реализовать Tsp
 -->

## Оборудование и программное обеспечение
- Java JDK версии 1.8 и выше
- Watchmaker framework версии 0.7.1 ([https://github.com/dwdyer/watchmaker](https://github.com/dwdyer/watchmaker))


## Представление решений (TspPositionalSolution)

Решение имеет представление порядка. Если поле route имеет вид: [0, 0, 1, 0, 3, 0, 2, 0, 0], то был проделан путь: [0, 1, 3, 2, 7, 4, 8, 5, 6].

## Мутация

Конструктор мутации принимает два параметра:
* probGlobal - вероятность, что мутация вообще будет применена
* localProbCoef - коэффициент, на который домножается 1/dimension, чтобы получить вероятность локальной мутации. Можно сказать, что localProbCoef задает математическое ожидание числа измененных генов

Для каждого гена с вероятностью localProbCoef/dimension ген заменяется на случайный из диапозона [ 0, dimension-(индекс_гена) ) 

## Кроссовер (TspCrossover)

Основным преемуществом представления порядка является возможность использования "классических" кроссоверов. В данном случае был применен дискретный кроссовер

TSP реализует дискретный кроссовер: выбирается случайный индекс i от 0 до dimension. Дочернее решение содержит гены первого родителя до i включительно. Остальные гены наследуются от второго родителя.

<!-- 
дополнить кроссовер
-->

<!--
Пояснить параметры
-->

## Результаты экспериментов

Как было сказано в методических материалах, применение данного представления с классическим кроссинговером приводит к посредственным результатам. Это было подтверждено в проведенных экспериментах.

Информация о xqf131:
* размер 131
* оптимальный маршрут 564


Результаты на xqf131

| CrossentropyProb | MutationGlobalProb | MutationLocalProbCoef | Параметры pop. и gen. | Длина маршрута | Количество итераций до сходимости | Количество итераций |
| ---------------- | ------------------ | --------------------- | --------------------- | -------------- | --------------------------------- | ------------------- |
| 0.01             | 0.9                | 1                     | 10000, 1000000        | 3169           | 555                               | 1500                |
| 0.01             | 0.9                | 3                     | 10000, 1000000        | 2925           | 604                               | 1500                |
| 0.01             | 0.9                | 5                     | 10000, 1000000        | 2990           | 685                               | 3500                |
| 0.01             | 0.9                | 10                    | 10000, 1000000        | 3371           | 715                               | 1500                |
| 0.1              | 0.9                | 5                     | 10000, 1000000        | 2717           | 1533                              | 4500                |
| 0.5              | 0.9                | 5                     | 10000, 1000000        | 1512           | 4453                              | 8000                |
| 0.8              | 0.9                | 5                     | 10000, 1000000        | 1348           | 3903                              | 14000               |




<br>
Для сравнения в лабораторной работе 4 решалась задача коммивояжера с представлеием "представление пути"

Был получен резльтат 777.62 при параметрах:
| Имя проблемы | Размер | Параметры pop. и gen. | Длина маршрута | Количество итераций до сходимости | Оптимальный маршрут |
| :----------- | :----- | :-------------------- | :------------- | :-------------------------------- | :------------------ |
| xqf131       | 131    | 100, 1000000          | 795.42         | 997753                            | 564                 |